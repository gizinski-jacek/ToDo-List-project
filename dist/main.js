(()=>{"use strict";const e=document.getElementById("projectsContainer"),t=document.getElementById("tasksContainer"),n=document.getElementById("projectsDropdown"),l=document.getElementById("Inbox"),a=document.getElementById("newItem"),o=(document.getElementById("header"),document.getElementById("modalNewPage")),c=document.getElementById("modalEditTask"),r=document.getElementById("modalEditProj"),d=(document.getElementById("modalNewMenu"),document.getElementById("modalNewTask")),s=document.getElementById("modalNewProject"),i=document.getElementById("newTaskBtn"),m=document.getElementById("newProjectBtn"),p=document.querySelectorAll(".confirm"),u=document.querySelectorAll(".confirmEdit"),E=document.querySelectorAll(".cancel"),g=document.querySelectorAll(".button-X"),y=document.getElementById("editTask"),k=document.getElementById("editProj");a.onclick=()=>{o.classList.toggle("show")},i.onclick=()=>{s.style.display="none",d.style.display="flex"},m.onclick=()=>{d.style.display="none",s.style.display="flex"},window.onclick=e=>{e.target==o?w(o):e.target==r?w(r):e.target==c&&w(c)},g.forEach((e=>{e.onclick=e=>{w(e.target.parentElement.parentElement.parentElement)}})),E.forEach((e=>{e.onclick=e=>{w(e.target.parentElement.parentElement.parentElement.parentElement.parentElement)}}));const w=e=>{e.classList.toggle("show")};p.forEach((e=>{e.onclick=e=>{let t=e.target.parentElement.parentElement;""==t[0].value?alert("No task name provided!"):"modalNewTask"==t.id?I(t):"modalNewProject"==t.id&&f(t)}})),u.forEach((e=>{e.onclick=e=>{let t=e.target.parentElement.parentElement;""==t[0].value?alert("No task name provided!"):"editTask"==t.id?h(t):"editTask"==t.id&&v(t)}}));const h=e=>{},v=e=>{};l.addEventListener("click",(e=>{b(e.target.id),j()})),n.onclick=()=>{e.classList.toggle("show")};const I=e=>{let t=e[2].value.split(/[\s\,\.\-]+/),n=t[0],l=t[1],a=t[2];0==B(n,l,a)?alert("Wrong date!"):(new G(e[0].value,e[1].value,e[2].value,e[3].value,N),j(),w(e.parentElement.parentElement.parentElement),q())},B=(e,t,n)=>{let l=new Date;return null!=e&&null!=t&&null!=n&&!(e<l.getFullYear()||e>9999)&&!(t<1||t>12)&&!(n<1||n>31)&&void 0},f=e=>{new z(e[0].value),L(),w(),q()},L=()=>{e.innerHTML="",J.forEach((t=>{e.append(S(t))}))},j=()=>{t.innerHTML="";let e=document.createElement("h3");e.textContent=N,t.append(e),"Inbox"==N?F.forEach((e=>{t.append(P(e))})):x(N).forEach((e=>{t.append(P(e))}))};let N=t.className;const b=e=>(t.className=e,N=e,N),x=e=>F.filter((t=>t.targetProject==e)),A=e=>{let t=document.createElement("p");return t.textContent=e,t},P=e=>{let t=document.createElement("div");t.id="task#"+F.indexOf(e),t.classList.add("task");let n=document.createElement("div");return n.append(A(e.title)),n.append(A(e.description)),n.append(A(e.dueDate)),n.append(A(e.priority)),n.append(A(e.targetProject)),t.append(n),t.append(C()),t.append(T()),t},S=e=>{let t=document.createElement("div");t.id="project#"+J.indexOf(e),t.classList.add("project");let n=document.createElement("button");return n.setAttribute("type","button"),n.textContent=e.title,n.addEventListener("click",(()=>{b(e.title),j()})),t.append(n),t.append(C()),t.append(T()),t},T=()=>{const e=document.createElement("button");return e.setAttribute("type","button"),e.classList.add("deleteBtn"),e.textContent="x",e.addEventListener("click",(e=>{D(e.target.parentElement),W()})),e},C=()=>{const e=document.createElement("button");return e.setAttribute("type","button"),e.classList.add("editBtn"),e.textContent="?",e.addEventListener("click",(e=>{O(e.target.parentElement),W()})),e},q=()=>{document.querySelectorAll("form").forEach((e=>{e.reset()}))},D=e=>{let t=e.id.split("#");"task"==t[0]?F.splice(t[1],1):"project"==t[0]&&J.splice(t[1],1),e.remove()},O=e=>{let t=e.id.split("#");"task"==t[0]?(M(F[t[1]]),c.classList.toggle("show"),y.className=t[1]):"project"==t[0]&&(H(J[t[1]]),r.classList.toggle("show"),k.className=t[1])},M=e=>{y[0].value=e.title,y[1].value=e.description,y[2].value=e.dueDate,y[3].value=e.priority},H=e=>{k[0].value=e.title},J=[],F=[],W=()=>{X(),Y()},X=()=>{localStorage.setItem("projectsList",JSON.stringify(J))},Y=()=>{localStorage.setItem("tasksList",JSON.stringify(F))};class z{constructor(e){this.title=e,J.push(this),X()}}class G{constructor(e,t,n,l,a){this.title=e,this.description=t,this.priority=l,this.dueDate=n,this.targetProject=a,F.push(this),Y()}}new z(11),new z("As"),new z("as"),new G(555,555,"2022-01-01",4,"Inbox"),new G(666,666,"2024-04-04",1,"11"),new G(777,777,"2026-07-07",2,"As"),new G(888,888,"2028-10-10",3,"as"),L(),j(),q()})();