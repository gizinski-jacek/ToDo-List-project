(()=>{"use strict";const e=document.getElementById("projectsContainer"),t=document.getElementById("tasksContainer"),l=document.getElementById("projectsDropdown"),n=document.getElementById("Inbox"),a=document.getElementById("newItem"),d=(document.getElementById("header"),document.getElementById("modalNewPage")),i=document.getElementById("modalEditTask"),o=document.getElementById("modalEditProj"),s=(document.getElementById("modalNewMenu"),document.getElementById("modalNewTask")),c=document.getElementById("modalNewProject"),r=document.getElementById("newTaskBtn"),u=document.getElementById("newProjectBtn"),p=document.querySelectorAll(".confirm"),m=document.querySelectorAll(".confirmEdit"),y=document.querySelectorAll(".cancel"),E=document.querySelectorAll(".button-X"),g=document.getElementById("editTask"),h=document.getElementById("editProj");a.onclick=()=>{f(d),s.style.display="flex"},r.onclick=()=>{f(d),s.style.display="flex"},u.onclick=()=>{f(d),c.style.display="flex"},window.onclick=e=>{let t=e.target==d,l=e.target==i,n=e.target==o;(t||l||n)&&f()},E.forEach((e=>{e.onclick=()=>{f()}})),y.forEach((e=>{e.onclick=()=>{f()}}));const f=e=>{d.style.display="none",s.style.display="none",c.style.display="none",i.style.display="none",o.style.display="none",void 0!==e&&(e.style.display="flex")};p.forEach((e=>{e.onclick=e=>{let t=e.target.parentElement.parentElement;""==t[0].value?alert("No task name provided!"):"modalNewTask"==t.id?k(t):"modalNewProject"==t.id&&j(t)}})),m.forEach((e=>{e.onclick=e=>{let t=e.target.parentElement.parentElement;""==t[0].value?alert("No task name provided!"):"editTask"==t.id?v(t):"editProj"==t.id&&w(t)}}));const v=e=>{console.log(e);let t=O.findIndex((t=>t.title==e.className));O[t].updateAllData(e[0].value,e[1].value,e[2].value,e[3].value),F(),x(),f(),_()},w=e=>{let t=J.findIndex((t=>t.title==e.className));J[t].updateTitle=e[0].value,O.forEach((t=>{t.targetProject==e.className&&(t.updateTargetProject=e[0].value)})),F(),B(),f(),_()};n.addEventListener("click",(e=>{D(e.target.id),x()})),l.onclick=()=>{e.classList.toggle("show")};const k=e=>{let t=e[0].value,l=e[1].value,n=e[2].value,a=e[3].value,d=N,i=e[2].value.split(/[\s\,\.\-]+/);0==I(i[0],i[1],i[2])?alert("Wrong date!"):(new z(t,l,n,a,d),F(),x(),f(),_())},I=(e,t,l)=>{let n=new Date;return null!=e&&null!=t&&null!=l&&!(new Date(e,t,l)<new Date)&&!(e<n.getFullYear()||e>9999)&&!(t<1||t>12)&&!(l<1||l>31)&&void 0},j=e=>{new Y(e[0].value),F(),B(),f(),_()},B=()=>{e.innerHTML="",J.forEach((t=>{e.append(L(t))}))},x=()=>{t.innerHTML="";let e=document.createElement("h3");e.textContent=N,t.append(e),"Inbox"==N?O.forEach((e=>{t.append(b(e))})):P(N).forEach((e=>{t.append(b(e))}))};let N=t.className;const D=e=>(t.className=e,N=e,N),P=e=>O.filter((t=>t.targetProject==e)),T=e=>{let t=document.createElement("p");return t.textContent=e,t},b=e=>{let t=document.createElement("div");t.id="task__"+e.title,t.classList.add("task");let l=document.createElement("div");return l.append(T(e.title)),l.append(T(e.description)),l.append(T(e.dueDate)),l.append(T(e.priority)),l.append(T(e.targetProject)),t.append(l),t.append(S()),t.append(A()),t},L=e=>{let t=document.createElement("div");t.id="project__"+e.title,t.classList.add("project");let l=document.createElement("button");return l.setAttribute("type","button"),l.textContent=e.title,l.addEventListener("click",(()=>{D(e.title),x()})),t.append(l),t.append(S()),t.append(A()),t},A=()=>{const e=document.createElement("button");return e.setAttribute("type","button"),e.classList.add("deleteBtn"),e.textContent="x",e.addEventListener("click",(e=>{C(e.target.parentElement),F()})),e},S=()=>{const e=document.createElement("button");return e.setAttribute("type","button"),e.classList.add("editBtn"),e.textContent="?",e.addEventListener("click",(e=>{q(e.target.parentElement),F()})),e},_=()=>{document.querySelectorAll("form").forEach((e=>{e.reset()}))},C=e=>{let t=e.id.split("__");if("task"==t[0]){let e=O.findIndex((e=>e.title==t[1]));O.splice(e,1)}else if("project"==t[0]){let e=J.findIndex((e=>e.title==t[1]));J.splice(e,1)}e.remove()},q=e=>{let t=e.id.split("__");if("task"==t[0]){let e=O.find((e=>e.title==t[1]));M(e),i.style.display="flex",g.className=t[1]}else if("project"==t[0]){let e=J.find((e=>e.title==t[1]));H(e),o.style.display="flex",h.className=t[1]}},M=e=>{g[0].value=e.title,g[1].value=e.description,g[2].value=e.dueDate,g[3].value=e.priority},H=e=>{h[0].value=e.title},J=[],O=[],F=()=>{W(),X()},W=()=>{localStorage.setItem("projectsList",JSON.stringify(J))},X=()=>{localStorage.setItem("tasksList",JSON.stringify(O))};class Y{constructor(e){this.title=e,J.push(this),W()}set updateTitle(e){this.title=e}}class z{constructor(e,t,l,n,a){this.title=e,this.description=t,this.priority=n,this.dueDate=l,this.targetProject=a,O.push(this),X()}set updateTitle(e){this.title=e}set updateDescription(e){this.description=e}set updatePriority(e){this.priority=e}set updateDueDate(e){this.dueDate=e}set updateTargetProject(e){this.targetProject=e}updateAllData(e,t,l,n){this.updateTitle=e,this.updateDescription=t,this.updateDueDate=l,this.updatePriority=n}}new Y(11),new Y("As"),new Y("as"),new z(555,555,"2022-01-01","high","Inbox"),new z(666,666,"2024-04-04","medium","11"),new z(777,777,"2026-07-07","low","As"),new z(888,888,"2028-10-10","medium","as"),new z(989,989,"2028-10-10","low","as"),B(),x(),_()})();