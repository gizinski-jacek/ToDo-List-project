(()=>{"use strict";const e=document.getElementById("containerFolders"),t=document.getElementById("containerToDos"),l=document.getElementById("dropdownFolders"),n=document.getElementById("Inbox"),o=document.getElementById("Today"),a=document.getElementById("Week"),d=document.getElementById("newItem"),i=(document.getElementById("header"),document.getElementById("modalNewPage")),r=document.getElementById("modalEditToDo"),s=document.getElementById("modalEditFolder"),c=(document.getElementById("modalNewMenu"),document.getElementById("modalNewToDo")),m=document.getElementById("modalNewFolder"),u=document.getElementById("newToDoBtn"),p=document.getElementById("newFolderBtn"),g=document.querySelectorAll(".confirm"),y=document.querySelectorAll(".confirmEdit"),E=document.querySelectorAll(".cancel"),v=document.querySelectorAll(".button-X"),h=document.getElementById("editToDo"),f=document.getElementById("editFolder"),I=document.querySelectorAll(".selectList");d.onclick=()=>{D(i),c.style.display="flex"},u.onclick=()=>{D(i),c.style.display="flex"},p.onclick=()=>{D(i),m.style.display="flex"},window.onclick=e=>{let t=e.target==i,l=e.target==r,n=e.target==s;(t||l||n)&&D()},v.forEach((e=>{e.onclick=()=>{D()}})),E.forEach((e=>{e.onclick=()=>{D(),O()}}));const D=e=>{i.style.display="none",c.style.display="none",m.style.display="none",r.style.display="none",s.style.display="none",void 0!==e&&(e.style.display="flex")};g.forEach((e=>{e.onclick=e=>{let t=e.target.parentElement.parentElement;""==t[0].value?alert("No ToDo name provided!"):""==t[2].value?alert("No Date provided!"):"modalNewToDo"==t.id?Q.find((e=>e.title===t[0].value))?alert("ToDo already exists! Provide unique name."):F(t):"modalNewFolder"==t.id&&(U.find((e=>e.title===t[0].value))?alert("Folder already exists! Provide unique name."):L(t))}})),y.forEach((e=>{e.onclick=e=>{let t=e.target.parentElement.parentElement;""==t[0].value?alert("No ToDo name provided!"):"editToDo"==t.id?w(t):"editFolder"==t.id&&T(t)}}));const w=e=>{let t=e.className.split("__"),l=Q.findIndex((e=>e.title===t[0]&&e.targetFolder===t[1]));Q[l].updateAllData(e[0].value,e[1].value,e[2].value,e[3].value,e[4].value),B(),H()},T=e=>{let t=U.findIndex((t=>t.title===e.className));U[t].updateTitle=e[0].value,Q.forEach((t=>{t.targetFolder===e.className&&(t.updateTargetFolder=e[0].value)})),b(e[0].value),S(),B(),H()};n.addEventListener("click",(e=>{b(e.target.id),B()})),o.addEventListener("click",(e=>{b(e.target.id),B()})),a.addEventListener("click",(e=>{b(e.target.id),B()})),l.onclick=()=>{e.classList.toggle("show")};const F=e=>{let t=e[0].value,l=e[1].value,n=e[2].value,o=e[3].value,a=e[4].value;new j(t,l,n,o,a),B(),H()},L=e=>{new R(e[0].value),J(),S(),H()},S=()=>{e.innerHTML="",U.forEach((t=>{e.append(A(t))}))},B=()=>{t.innerHTML="";let e=document.createElement("h3");e.textContent=x,t.append(e),k().forEach((e=>{t.append(_(e))}))};let x=t.className;const b=e=>{t.className=e,x=e},k=()=>{let e=new Date,t=new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().split("T")[0],l=[];return"Inbox"===x?Q:"Today"===x?(l=Q.filter((e=>e.dueDate==t)),l):(l=Q.filter((e=>e.targetFolder===x)),l)},N=e=>{let t=document.createElement("p");return t.textContent=e,t},_=e=>{let t=document.createElement("div");t.id="todo__"+e.title+"__"+e.targetFolder,t.classList.add("todo","priority"+e.priority),t.addEventListener("click",(e=>{e.currentTarget.querySelectorAll(".moreDetails")[0].classList.toggle("show")}));let l=document.createElement("div");l.classList.add("fewDetails");let n=document.createElement("div");n.append(N(e.dueDate)),n.append(N(e.title));let o=document.createElement("div");o.classList.add("controls"),o.append(C()),o.append(q()),l.append(n),l.append(o);let a=document.createElement("div");return a.classList.add("moreDetails"),a.append(N(e.description)),a.append(N("Folder: "+e.targetFolder)),t.append(l),t.append(a),t},A=e=>{let t=document.createElement("div");t.id="folder__"+e.title,t.textContent=e.title,t.classList.add("folder"),t.addEventListener("click",(()=>{b(e.title),B()}));let l=document.createElement("div");return l.classList.add("controls"),l.append(C()),l.append(q()),t.append(l),t},q=()=>{const e=document.createElement("input");return e.setAttribute("type","image"),e.classList.add("deleteBtn"),e.src="imgs/delete-64.png",e.alt="Delete",e.addEventListener("click",(e=>{M(e.target.closest(".folder, .todo")),z(),e.stopPropagation()})),e},C=()=>{const e=document.createElement("input");return e.setAttribute("type","image"),e.classList.add("editBtn"),e.src="imgs/edit-64.png",e.alt="Edit",e.addEventListener("click",(e=>{P(e.target.closest(".folder, .todo")),z(),e.stopPropagation()})),e},O=()=>{document.querySelectorAll("form").forEach((e=>{e.reset()}))},H=()=>{z(),D(),O()},M=e=>{let t=e.id.split("__");if("todo"==t[0]){let e=Q.findIndex((e=>e.title===t[1]&&e.targetFolder===t[2]));Q.splice(e,1)}else if("folder"==t[0]){let e=U.findIndex((e=>e.title===t[1]));U.splice(e,1)}e.remove()},P=e=>{let t=e.id.split("__");if("todo"==t[0]){let e=Q.find((e=>e.title===t[1]&&e.targetFolder===t[2]));G(e),r.style.display="flex",h.className=t[1]+"__"+t[2]}else if("folder"==t[0]){let e=U.find((e=>e.title===t[1]));K(e),s.style.display="flex",f.className=t[1]}},J=()=>{I.forEach((e=>{e.innerHTML="";let t=document.createElement("option");t.value="Inbox",t.textContent="Inbox",e.append(t),U.forEach((t=>{let l=document.createElement("option");l.value=t.title,l.textContent=t.title,e.append(l)}))}))},G=e=>{h[0].value=e.title,h[1].value=e.description,h[2].value=e.dueDate,h[3].value=e.priority,J()},K=e=>{f[0].value=e.title};class R{constructor(e){this.title=e,U.push(this),X()}set updateTitle(e){this.title=e}}class j{constructor(e,t,l,n,o){this.title=e,this.description=t,this.priority=n,this.dueDate=l,this.targetFolder=o,Q.push(this),W()}set updateTitle(e){this.title=e}set updateDescription(e){this.description=e}set updatePriority(e){this.priority=e}set updateDueDate(e){this.dueDate=e}set updateTargetFolder(e){this.targetFolder=e}updateAllData(e,t,l,n,o){this.updateTitle=e,this.updateDescription=t,this.updateDueDate=l,this.updatePriority=n,this.targetFolder=o}}const z=()=>{W(),X()},W=()=>{localStorage.setItem("libraryToDos",JSON.stringify(Q))},X=()=>{localStorage.setItem("libraryFolders",JSON.stringify(U))},Q=JSON.parse(localStorage.getItem("libraryToDos"))||[],U=JSON.parse(localStorage.getItem("libraryFolders"))||[],V=()=>{new R("Kitchen"),new R("House"),new R("Gym"),new j("Jake Mail","Send Email to Jake about upcoming project","2025-01-01","High","Inbox"),new j("Basement","Clean trash from basement","2027-02-02","Medium","House"),new j("Lightbulb","Replace kitchen lightbulb","2021-06-08","Low","Kitchen"),new j("Carpet","Clean the carpet",(new Date).toISOString().split("T")[0],"Low","House"),new j("Gym","Renew gym membership",(new Date).toISOString().split("T")[0],"Medium","Gym")};localStorage.getItem("libraryToDos")||localStorage.getItem("libraryFolders")||V(),0===Q.length&&0===U.length&&V(),S(),B(),O(),J()})();